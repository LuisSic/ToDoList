(()=>{"use strict";var e={601:(e,r,t)=>{t.d(r,{y:()=>p}),t(43);var o=t(826),s=t(272),n=t.n(s),a=t(480),i=t(960),u=t(540);const d=new a.DynamoDB.DocumentClient,p=async(e,r)=>{let t;try{t=(await d.get({TableName:process.env.TASK_TABLE_NAME,Key:{id:e,user:r}}).promise()).Item}catch(e){throw console.error(e),new i.InternalServerError(e)}if(!t)throw new i.NotFound(`Task with ID "${e}" not found`);return t};(0,o.$)((async e=>{const{id:r}=e.pathParameters,{email:t}=e.requestContext.authorizer;let o=await p(r,t);return{statusCode:201,body:JSON.stringify(o,null,2)}})).use(n()({inputSchema:u.Z}))},540:(e,r,t)=>{t.d(r,{Z:()=>o});const o={type:"object",properties:{queryStringParameters:{type:"object",properties:{id:{type:"string"}}}},required:["queryStringParameters"]}},405:(e,r,t)=>{t.d(r,{H:()=>o.H});var o=t(42)},42:(e,r,t)=>{var o;t.d(r,{H:()=>o}),function(e){e.COMPLETED="COMPLETED",e.DELETED="DELETED",e.NOT_FINISH="NOT_FINISH"}(o||(o={}))},9:(e,r,t)=>{t.d(r,{$:()=>c});var o=t(806),s=t.n(o),n=t(657),a=t.n(n),i=t(262),u=t.n(i),d=t(111),p=t.n(d),y=t(165),l=t.n(y);const c=e=>s()(e).use([a()(),u()(),p()(),l()()])},826:(e,r,t)=>{t.d(r,{$:()=>o.$});var o=t(9)},806:e=>{e.exports=require("@middy/core")},165:e=>{e.exports=require("@middy/http-cors")},111:e=>{e.exports=require("@middy/http-error-handler")},262:e=>{e.exports=require("@middy/http-event-normalizer")},657:e=>{e.exports=require("@middy/http-json-body-parser")},272:e=>{e.exports=require("@middy/validator")},480:e=>{e.exports=require("aws-sdk")},960:e=>{e.exports=require("http-errors")},43:e=>{e.exports=require("source-map-support/register")}},r={};function t(o){if(r[o])return r[o].exports;var s=r[o]={exports:{}};return e[o](s,s.exports,t),s.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{t.r(o),t.d(o,{main:()=>u});var e=t(480),r=t(960),s=t(826),n=t(405),a=t(601);const i=new e.DynamoDB.DocumentClient,u=(0,s.$)((async(e,t)=>{const{id:o}=e.pathParameters,{statusTask:s,isImportant:u,isMyDay:d}=e.body,{email:p}=e.requestContext.authorizer,y=await(0,a.y)(o,p);if(y.user!==p)throw new r.Unauthorized("You cannot modify this task!");if(y.statusTask===n.H.DELETED)throw new r.Forbidden("You cannot edit a deteled task");const l={TableName:process.env.TASK_TABLE_NAME,Key:{id:o,user:p},UpdateExpression:"set statusTask = :newStatus, isImportant = :newIsImportant, isMyDay = :newIsMyDay",ExpressionAttributeValues:{":newStatus":s,":newIsImportant":u,":newIsMyDay":d},ReturnValues:"ALL_NEW"};let c;try{c=(await i.update(l).promise()).Attributes}catch(e){throw console.error(e),new r.InternalServerError(e)}return{statusCode:200,body:JSON.stringify(c,null,2)}}))})();var s=exports;for(var n in o)s[n]=o[n];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();
//# sourceMappingURL=handler.js.map