(()=>{"use strict";var e={601:(e,r,t)=>{t.d(r,{y:()=>p}),t(43);var o=t(826),n=t(272),s=t.n(n),a=t(480),i=t(960),u=t(540);const d=new a.DynamoDB.DocumentClient,p=async e=>{let r;try{r=(await d.get({TableName:process.env.TASK_TABLE_NAME,Key:{id:e}}).promise()).Item}catch(e){throw console.error(e),new i.InternalServerError(e)}if(!r)throw new i.NotFound(`Task with ID "${e}" not found`);return r};(0,o.$)((async e=>{const{id:r}=e.pathParameters;let t=await p(r);return{statusCode:201,body:JSON.stringify(t,null,2)}})).use(s()({inputSchema:u.Z}))},540:(e,r,t)=>{t.d(r,{Z:()=>o});const o={type:"object",properties:{queryStringParameters:{type:"object",properties:{id:{type:"string"}}}},required:["queryStringParameters"]}},405:(e,r,t)=>{t.d(r,{H:()=>o.H});var o=t(42)},42:(e,r,t)=>{var o;t.d(r,{H:()=>o}),function(e){e.COMPLETED="COMPLETED",e.DELETED="DELETED",e.NOT_FINISH="NOT_FINISH"}(o||(o={}))},9:(e,r,t)=>{t.d(r,{$:()=>y});var o=t(806),n=t.n(o),s=t(657),a=t.n(s),i=t(262),u=t.n(i),d=t(111),p=t.n(d);const y=e=>n()(e).use([a()(),u()(),p()()])},826:(e,r,t)=>{t.d(r,{$:()=>o.$});var o=t(9)},806:e=>{e.exports=require("@middy/core")},111:e=>{e.exports=require("@middy/http-error-handler")},262:e=>{e.exports=require("@middy/http-event-normalizer")},657:e=>{e.exports=require("@middy/http-json-body-parser")},272:e=>{e.exports=require("@middy/validator")},480:e=>{e.exports=require("aws-sdk")},960:e=>{e.exports=require("http-errors")},43:e=>{e.exports=require("source-map-support/register")}},r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{t.r(o),t.d(o,{main:()=>u});var e=t(480),r=t(960),n=t(826),s=t(405),a=t(601);const i=new e.DynamoDB.DocumentClient,u=(0,n.$)((async(e,t)=>{const{id:o}=e.pathParameters,{status:n}=e.body;if((await(0,a.y)(o)).statusTask===s.H.DELETED)throw new r.Forbidden("You cannot edit a deteled task");const u={TableName:process.env.TASK_TABLE_NAME,Key:{id:o},UpdateExpression:"set statusTask = :newStatus",ExpressionAttributeValues:{":newStatus":n},ReturnValues:"ALL_NEW"};let d;try{d=(await i.update(u).promise()).Attributes}catch(e){throw console.error(e),new r.InternalServerError(e)}return{statusCode:200,body:JSON.stringify(d,null,2)}}))})();var n=exports;for(var s in o)n[s]=o[s];o.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();
//# sourceMappingURL=handler.js.map